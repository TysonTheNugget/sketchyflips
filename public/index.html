<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sketchy Dapps</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.ethers.io/lib/ethers-5.7.umd.min.js"></script>
    <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
</head>
<body>
    <div id="gameInterface" class="min-h-screen flex flex-col items-center p-4">
        <h1>ðŸŽ® Sketchy Dapps ðŸŽ²</h1>
        <p>Fun, friends, NFTs!</p>
        <div id="mainMenu" class="space-y-4">
            <button id="betButton" class="neon-button">Bet-A-Sketchy</button>
            <a href="https://abscan.io/" target="_blank" id="infoButton">i</a>
            <button class="neon-button">Mymilio Daycare</button>
        </div>
        <div id="gameControls" class="hidden space-y-4 w-full max-w-md">
            <button id="homeButton" class="neon-button">Home</button>
            <button id="connectButton" class="neon-button">ðŸ”Œ Connect Wallet</button>
            <div id="accountInfo">Account: Not connected</div>
            <div id="selectedNFT" class="yellow-info flex flex-col items-center p-2">
                <span>Selected NFT:</span>
                <span id="nftText">Your Sketchy</span>
                <img id="nftImage" src="https://via.placeholder.com/32x32?text=NF" alt="Selected NFT" class="w-16 h-16 object-contain rounded hidden">
            </div>
            <button id="selectNFTBtn" class="neon-button">ðŸŽ¯ Select NFT</button>
            <button id="createGameBtn" class="neon-button">ðŸŽ° Create Game</button>
            <h2 class="yellow-info text-xl mb-2">ðŸŽ¯ Open Games</h2>
            <div id="openGamesList"></div>
            <p id="status" class="text-yellow-500 text-sm text-center status-pulse">Status: Waiting...</p>
        </div>
    </div>
    <div id="infoModal" class="modal hidden">
        <div class="modal-content max-w-md p-4 bg-image-box">
            <span class="close">Ã—</span>
            <h2>About Bet-A-Sketchy</h2>
            <p>50% chance PVP to win a Sketchy by betting one, verified by Gelato.</p>
            <a href="https://abscan.io/address/0xf6b8d2E0d36669Ed82059713BDc6ACfABe11Fde6#code" target="_blank" class="underline text-blue-400 hover:text-blue-600">ABScan</a> |
            <a href="#" target="_blank" class="underline text-blue-400 hover:text-blue-600">More Info</a>
        </div>
    </div>
    <div id="nftModal" class="modal hidden">
        <div class="modal-content max-w-md p-4 bg-image-box">
            <span class="close">Ã—</span>
            <h2>Select NFT</h2>
            <div id="nftList" class="nft-grid"></div>
        </div>
    </div>
    <div id="resultsModal" class="modal hidden">
        <div class="modal-content max-w-md p-4 bg-image-box">
            <span class="close">Ã—</span>
            <h2>Game History</h2>
            <div id="resultsModalList"></div>
            <button id="refreshHistoryBtn" class="neon-button text-sm py-1 px-2 mt-2 w-full">Refresh History</button>
        </div>
    </div>
    <div id="videoOverlay" class="modal hidden">
        <div class="modal-content max-w-md p-4 bg-image-box">
            <div id="animationNFTs" class="flex gap-2 justify-center mb-2"></div>
            <p id="resultText" class="text-base font-bold text-center"></p>
            <video id="resultVideo" autoplay muted playsinline class="w-full max-w-[150px] mt-2 rounded mx-auto">
                <source type="video/mp4">
            </video>
            <p id="videoError" class="text-red-500 text-xs mt-1 text-center status-pulse hidden"></p>
            <button id="closeVideoBtn" class="neon-button text-sm py-1 px-2 mt-2 w-full">Close</button>
        </div>
    </div>
    <div id="loadingScreen" class="hide">
        <div id="loadingText">Loading SketchyMilios...</div>
    </div>
    <div class="fixed bottom-4 right-4 flex space-x-2">
        <button id="resultsButton" class="relative">Results <span id="resultsNotification" class="hidden">0</span></button>
        <button id="refreshResultsBtn" class="neon-button text-sm py-1 px-2">Refresh</button>
    </div>
    <script src="app.js"></script>
    <script src="ui.js"></script>
</body>
</html>